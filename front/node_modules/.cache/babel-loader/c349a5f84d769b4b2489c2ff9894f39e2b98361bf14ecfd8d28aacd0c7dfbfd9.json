{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./Nav.css\";import{NavLink,useNavigate}from\"react-router-dom\";import taxMapLogo from\"../../assets/images/taxmap-official-logo.png\";import{getDepartments}from\"../../services/departmentService\";// 부처별 모드 요소\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Nav(_ref){let{onDepartmentSelect}=_ref;const navigate=useNavigate();// 카테고리 요소에 마우스 hover 시 보이는 세부 내용\nconst[hoveredItem,setHoveredItem]=useState(\"\");const[departments,setDepartments]=useState([]);// 부처별 모드 요소 로딩\nconst[isLoading,setIsLoading]=useState(false);// 부처별 모드 요소 로딩\n// 부처 데이터를 서버에서 가져오는 비동기 함수\nconst fetchDepartments=async()=>{try{setIsLoading(true);const data=await getDepartments();setDepartments(data);}catch(error){console.error(\"Error fetching departments:\",error);}finally{setIsLoading(false);}};// hoveredItem이 department 일때 fetchDepartments 호출\nuseEffect(()=>{if(hoveredItem===\"department\"&&departments.length===0){fetchDepartments();}},[hoveredItem]);const handleDepartmentClick=department=>{console.log(\"사용자가 선택한 부처:\",department);// 선택한 부처 콘솔 출력\nonDepartmentSelect(department);// 부처 선택 시 부모 컴포넌트의 상태를 업데이트\nnavigate(\"/map\",{state:{coordinates:{lat:37.55805491922956,lng:126.99832780535394},department:department}});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-bar\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:taxMapLogo,alt:\"taxMapLogo\",className:\"taxMapLogo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"links-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item\",onMouseEnter:()=>setHoveredItem(\"department\"),onMouseLeave:()=>setHoveredItem(\"\"),children:[/*#__PURE__*/_jsx(NavLink,{to:\"/map/department\",className:\"department-mode\",children:\"\\uBD80\\uCC98\\uBCC4 \\uBAA8\\uB4DC\"}),hoveredItem===\"department\"&&/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-content\",style:{display:\"grid\"},children:isLoading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):departments.map((department,index)=>/*#__PURE__*/_jsx(NavLink,{className:\"dropdown-item\",to:{pathname:\"/map/department\",search:\"?category=\".concat(department)},onClick:()=>handleDepartmentClick(department),children:department},index))})]})})]})});}export default Nav;","map":{"version":3,"names":["React","useEffect","useState","NavLink","useNavigate","taxMapLogo","getDepartments","jsx","_jsx","jsxs","_jsxs","Nav","_ref","onDepartmentSelect","navigate","hoveredItem","setHoveredItem","departments","setDepartments","isLoading","setIsLoading","fetchDepartments","data","error","console","length","handleDepartmentClick","department","log","state","coordinates","lat","lng","children","className","href","src","alt","onMouseEnter","onMouseLeave","to","style","display","map","index","pathname","search","concat","onClick"],"sources":["D:/Users/PJH/Dongguk/tax-map-frontend/src/components/Nav/Nav.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Nav.css\";\r\nimport { NavLink, useNavigate } from \"react-router-dom\";\r\nimport taxMapLogo from \"../../assets/images/taxmap-official-logo.png\";\r\nimport { getDepartments } from \"../../services/departmentService\"; // 부처별 모드 요소\r\n\r\nfunction Nav({ onDepartmentSelect }) {\r\n  const navigate = useNavigate();\r\n  // 카테고리 요소에 마우스 hover 시 보이는 세부 내용\r\n  const [hoveredItem, setHoveredItem] = useState(\"\");\r\n  const [departments, setDepartments] = useState([]); // 부처별 모드 요소 로딩\r\n  const [isLoading, setIsLoading] = useState(false); // 부처별 모드 요소 로딩\r\n\r\n  // 부처 데이터를 서버에서 가져오는 비동기 함수\r\n  const fetchDepartments = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const data = await getDepartments();\r\n      setDepartments(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching departments:\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // hoveredItem이 department 일때 fetchDepartments 호출\r\n  useEffect(() => {\r\n    if (hoveredItem === \"department\" && departments.length === 0) {\r\n      fetchDepartments();\r\n    }\r\n  }, [hoveredItem]);\r\n\r\n  const handleDepartmentClick = (department) => {\r\n    console.log(\"사용자가 선택한 부처:\", department); // 선택한 부처 콘솔 출력\r\n    onDepartmentSelect(department); // 부처 선택 시 부모 컴포넌트의 상태를 업데이트\r\n    navigate(\"/map\", {\r\n      state: {\r\n        coordinates: { lat: 37.55805491922956, lng: 126.99832780535394 },\r\n        department: department,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* NavBar*/}\r\n      <div className=\"nav-bar\">\r\n        <a href=\"/\">\r\n          <img src={taxMapLogo} alt=\"taxMapLogo\" className=\"taxMapLogo\"></img>\r\n        </a>\r\n        <div className=\"links-container\">\r\n          {/** 서비스 모드 llm 으로 구분 못해 기능 제거 추후 구현 예정  */}\r\n          {/* <div \r\n            className=\"nav-item\"\r\n            onMouseEnter={() => setHoveredItem(\"service\")}\r\n            onMouseLeave={() => setHoveredItem(\"\")}\r\n          >\r\n            <NavLink to=\"/map/service\" className=\"service-mode\">\r\n              서비스 모드\r\n            </NavLink>\r\n            {hoveredItem === \"service\" && (\r\n              <div className=\"dropdown-content\" style={{ display: \"grid\" }}>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  행정 / 통일 / 외교\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  사회복지향상\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  국토개발지원\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  안정보장\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  보훈향상\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  교통 / 물류진흥\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  교육 보장\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  고용안정\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  방송 / 통신진흥\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  문화활동\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  주거안정\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  과학기술진흥\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  관광 / 휴양활동\r\n                </NavLink>\r\n                <NavLink\r\n                  to={{ pathname: \"/map/service\", search: \"?category=\" }}\r\n                >\r\n                  {\" \"}\r\n                  보건 / 의료\r\n                </NavLink>\r\n              </div>\r\n            )}\r\n          </div> */}\r\n          <div\r\n            className=\"nav-item\"\r\n            onMouseEnter={() => setHoveredItem(\"department\")}\r\n            onMouseLeave={() => setHoveredItem(\"\")}\r\n          >\r\n            <NavLink to=\"/map/department\" className=\"department-mode\">\r\n              부처별 모드\r\n            </NavLink>\r\n            {hoveredItem === \"department\" && (\r\n              <div className=\"dropdown-content\" style={{ display: \"grid\" }}>\r\n                {isLoading ? (\r\n                  <p>Loading...</p>\r\n                ) : (\r\n                  departments.map((department, index) => (\r\n                    <NavLink\r\n                      key={index}\r\n                      className=\"dropdown-item\"\r\n                      to={{\r\n                        pathname: \"/map/department\",\r\n                        search: `?category=${department}`,\r\n                      }}\r\n                      onClick={() => handleDepartmentClick(department)}\r\n                    >\r\n                      {department}\r\n                    </NavLink>\r\n                  ))\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Nav;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}